/*! legenddigital.com.au - v1.0.0 - 2017-09-16 */
function loadXmlFile(a){var b=null;if(window.ActiveXObject)b=new ActiveXObject("Microsoft.XMLDOM"),b.loadXML(a);else if(document.implementation&&document.implementation.createDocument){var c=new window.XMLHttpRequest;c.open("GET",a,!1),c.send(null),b=c.responseXML}else b=null;return b}if($(".story-step").length){var anchorHd=$(".story-pagination"),anchorHdItem=$(".story-pagination .anchor-hd"),anchorBd=$(".story-step"),anchorBdItem=$(".story-step .anchor-bd"),hDetailMenu=function(){$(window).scrollTop()>anchorBd.offset().top?anchorHd.addClass("active"):anchorHd.removeClass("active")},hDetailMenuBd=function(){for(var a=anchorHdItem.length,b=a;b>0;b--){var c=anchorBdItem.eq(b-1),d=c.attr("id");if(c.offset().top<=$(window).scrollTop()+$(window).height()/2){console.log(d),anchorHdItem.each(function(){var a=$(this);a.attr("data-anchor")==d&&a.addClass("active").siblings().removeClass("active")});break}}};anchorHdItem.each(function(){var a=$(this);a.bind("click",function(){var b=a.attr("data-anchor");$("body, html").stop(!0).animate({scrollTop:$("#"+b).offset().top-$(".header").outerHeight(!0)+2})})}),hDetailMenuBd(),$(window).scroll(function(){anchorBd.length&&hDetailMenuBd()})}!function(a){var b=a(window).scrollTop();a(window).height(),a(window).width();a(window).scroll(function(){b=a(window).scrollTop()}),a.fn.extend({scrollBar:function(){return this.each(function(){var b=a(this);b.perfectScrollbar();var c=null;a(window).resize(function(){clearTimeout(c),c=setTimeout(function(){b.perfectScrollbar("update")},300)})}),this}})}(jQuery),$(".scroll-bd").scrollBar(),$(function(){$(function(){function a(a){var b=parseInt(a.attr("timestamp"));b=Math.round(b/1e3);var c=(new Date).getTime()/1e3;a.attr("timer",b-c)}function b(a){var b=parseInt(a.attr("timer")),c=b;if(!(b<0)){var d=a.find(".day"),e=a.find(".hour"),f=a.find(".minute"),g=a.find(".second");if(d.length){var h=Math.floor(c/86400);d.text(h),c-=86400*h}if(e.length){var i=Math.floor(c/3600);e.text((i<10?"0":"")+i),c-=3600*i}if(f.length){var j=Math.floor(c/60);f.text((j<10?"0":"")+j),c-=60*j}g.length&&(console.log("3"),g.text((c<10?"0":"")+c)),b--,a.attr("timer",b)}}for(var c=$(".timer-simple-seconds"),d=0;d<c.length;d++){var e=$(c[d]);e.attr("timestamp")?a(e):e.attr("datetime")&&function(b){var c=new Date(b.attr("datetime")).getTime();b.attr("timestamp",c),a(b)}(e),b(e),setInterval(b,1e3,e)}})}),$(function(){if(device.landscape()&&$(window).width()<=768?($(".section-1").height(1.4*$(window).height()),$(".section-2").height(1.4*$(window).height())):($(".section-1").height($(window).height()),$(".section-2").height($(window).height())),$(window).resize(function(){device.landscape()&&$(window).width()<=768?($(".section-1").height(1.4*$(window).height()),$(".section-2").height(1.4*$(window).height())):($(".section-1").height($(window).height()),$(".section-2").height($(window).height()))}),$(".section-6").length){var a=0,b=null,c=$(".section-6").find(".hide-txt li"),d=c.length-1,e=$(".section-6").find(".prev .btn"),f=$(".section-6").find(".next .btn"),g=$(".section-6").find(".cur-value"),h=$(".section-6").find(".btn-prev"),i=$(".section-6").find(".btn-next"),j=$(".section-6").find(".btn-current"),k=$(".section-6").find(".prev-value"),l=$(".section-6").find(".next-value"),m=function(){g.find("h3").fadeOut(200),g.find("p").fadeOut(200),setTimeout(function(){j.html(c.eq(a).find("span").html()),g.find("h3").html(c.eq(a).find("span").html()),g.find("p").html(c.eq(a).find("p").html()),g.find("h3").fadeIn(200),g.find("p").fadeIn(200)},200),a>0?(k.find("h4").fadeOut(200),setTimeout(function(){h.html(c.eq(a-1).find("span").html()),k.find("h4").html(c.eq(a-1).find("span").html()),k.find("h4").fadeIn(200)},200)):(h.html(""),k.find("h4").html("")),a<d?(l.find("h4").fadeOut(200),setTimeout(function(){i.html(c.eq(a+1).find("span").html()),l.find("h4").html(c.eq(a+1).find("span").html()),l.find("h4").fadeIn(200)},200)):(i.html(""),l.find("h4").html(""))};e.bind("click",function(){a>0?(a-=1,m()):(a=d,m())}),f.bind("click",function(){a<d?(a+=1,m()):(a=0,m())}),m(),b=setInterval(function(){f.click()},2e3),e.bind("mouseenter",function(){clearInterval(b)}),f.bind("mouseenter",function(){clearInterval(b)}),g.bind("mouseenter",function(){clearInterval(b)}),e.bind("mouseleave",function(){b=setInterval(function(){f.click()},2e3)}),f.bind("mouseleave",function(){b=setInterval(function(){f.click()},2e3)}),g.bind("mouseleave",function(){b=setInterval(function(){f.click()},2e3)})}$("#particles").length&&particlesJS("particles",{particles:{color:"#fff",shape:"circle",opacity:1,size:4,size_random:!0,nb:50,line_linked:{enable_auto:!0,distance:$(window).width()<=768?100:250,color:"#fff",opacity:1,width:1,condensed_mode:{enable:!1,rotateX:600,rotateY:600}}},interactivity:{enable:!0,mouse:{distance:300},detect_on:"canvas",mode:"grab",line_linked:{opacity:.5},events:{onclick:{enable:!0,mode:"push",nb:4}}},retina_detect:!0})}),$(function(){function a(a){for(var b=new THREE.Geometry,c=new THREE.MeshBasicMaterial({color:16777215,emissive:16777215}),e=new THREE.MeshBasicMaterial({color:16777215,opacity:.4,emissive:16777215}),f=(new THREE.MeshBasicMaterial({color:1023231}),0);f<a.length-1;f++)if(f%1==0){var g=parseInt(a[f][0])+180,h=-1*parseInt(a[f][1]-84),i=parseFloat(a[f][2]),j=d(h,g,400,2),k=d(h,g,401+i/30/2,2),l=new THREE.Mesh(new THREE.CubeGeometry(1,1,1+i/30,1,1,1,e)),m=new THREE.Mesh(new THREE.CubeGeometry(1,1,1,1,1,1,c));if(l.position=j,m.position=k,l.lookAt(new THREE.Vector3(0,0,0)),m.lookAt(new THREE.Vector3(0,0,0)),1+i/30/2>=8){var n=new THREE.SphereGeometry(3,3,3),p=new THREE.MeshBasicMaterial({color:16777215}),q=new THREE.Mesh(n,p);q.position=k,q.lookAt(new THREE.Vector3(0,0,0)),o.add(q)}THREE.GeometryUtils.merge(b,l),THREE.GeometryUtils.merge(b,m)}var r=new THREE.Mesh(b,new THREE.MeshFaceMaterial);o.add(r)}function b(){light=new THREE.DirectionalLight(3355630,3.5,500),o.add(light),light.position.set(h,i,j)}function c(){var a=new THREE.SphereGeometry(400,30,30),b=new THREE.MeshBasicMaterial({color:1023231});sp=new THREE.Mesh(a,b),o.add(sp)}function d(a,b,c,d){var e=a*Math.PI/180,f=(b-180)*Math.PI/180,g=-(c+d)*Math.cos(e)*Math.cos(f),h=(c+d)*Math.sin(e),i=(c+d)*Math.cos(e)*Math.sin(f);return new THREE.Vector3(g,h,i)}function e(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight)}function f(){var a=1e-4*Date.now();n.position.x=1800*Math.cos(a),n.position.z=1800*Math.sin(a),n.lookAt(o.position),light.position=n.position,light.lookAt(o.position),e(),m.render(o,n),requestAnimationFrame(f)}function g(a,b){b=b||",";for(var c=new RegExp("(\\"+b+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+b+"\\r\\n]*))","gi"),d=[[]],e=null;e=c.exec(a);){var f=e[1];if(f.length&&f!=b&&d.push([]),e[2])var g=e[2].replace(new RegExp('""',"g"),'"');else var g=e[3];d[d.length-1].push(g)}return d}var h=1800,i=500,j=1800,k=$(window).width(),l=$(window).height(),m=new THREE.WebGLRenderer({alpha:!0,antialias:!0});m.setSize(k,l),m.setClearColor(16777215,0),document.getElementById("particles2").appendChild(m.domElement);var n=new THREE.PerspectiveCamera(45,k/l,1,4e3);n.position.set(h,i,j),n.lookAt(new THREE.Vector3(0,0,0));var o=new THREE.Scene;o.add(n),$(document).ready(function(){jQuery.get("dist/data/density.csv",function(d){a(g(d)),b(),c(),f()})})}),$(window).load(function(){if(device.android()||device.ios())$("#skrollr-body").height("auto");else{var a=skrollr.init({forceHeight:!1,mobileCheck:function(){return!1}});a.isMobile()&&a.destroy()}});